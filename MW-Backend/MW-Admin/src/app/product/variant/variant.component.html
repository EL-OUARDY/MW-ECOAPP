<form #form="ngForm" (ngSubmit)="saveVariant()" autocomplete="off" class="variantsContainer">
  <div class="variantsInputs" >
      <div (click)="varImage.click()" class="varImage">
          <input #varImage type="file" (change)="imageChanged($event.target.files)" style="display: none" />
          <img *ngIf="imgPath" [src]="imgPath" class="mainimage halfOpacity" />
          <img *ngIf="_variant.Image && !imgPath" [src]="'/Content/Images/Products/' + _productObject.Id + '/Variants/' + _variant.Id + '/' + _variant.Image"
                class="mainimage halfOpacity" />
          <ng-container *ngIf="!imgPath && !_variant.Image">
            <svg _ngcontent-c3="" xml:space="preserve" class="svgplusimage" enable-background="new 0 0 1000 1000"
              version="1.1" viewBox="0 0 1000 1000" x="0px" y="0px">
              <path _ngcontent-c3=""
                d="M383.6,313.6c0-38.7-31.4-70-70.1-70c-38.7,0-70,31.4-70,70c0,38.7,31.4,70.1,70,70.1C352.3,383.6,383.6,352.3,383.6,313.6L383.6,313.6z">
              </path>
              <path _ngcontent-c3="" d="M383.6,313.6"></path>
              <path _ngcontent-c3=""
                d="M616.5,671.3h57.9v-57.9c0-42.6,25.6-79.3,62.1-95.9l-9.7-33.2V482h0.1l-63.3-191.4L442.4,576l-59.3-100.4L148,712.9h346.3h38.9C552.5,687.8,582.5,671.3,616.5,671.3z">
              </path>
              <path _ngcontent-c3=""
                d="M990,166.8C990,80.6,919.4,10,833.2,10H166.8C80.6,10,10,80.6,10,166.8v666.4C10,919.4,80.6,990,166.8,990h470.4v0c0.1,0,0.1,0,0.2,0c16.2,0,29.4-13.2,29.4-29.4c0-16.2-13.2-29.4-29.4-29.4c-0.1,0-0.1,0-0.2,0v0H166.8c-54.1,0-98-43.9-98-98V166.8c0-54.1,43.9-98,98-98h666.4c54.1,0,98,43.9,98,98v467.5c0,0.4-0.2,0.6-0.2,0.9c0,16.2,13.2,29.4,29.4,29.4c16.2,0,29.4-13.2,29.4-29.4c0-0.1-0.1-0.2-0.1-0.4h0.3V166.8z">
              </path>
              <path _ngcontent-c3=""
                d="M959.5,747.5H809.6V597.6c0-16.2-13.2-29.4-29.4-29.4c-16.2,0-29.4,13.2-29.4,29.4v149.9H600.9c-16.2,0-29.4,13.2-29.4,29.4c0,16.2,13.2,29.4,29.4,29.4h149.9v149.9c0,16.2,13.2,29.4,29.4,29.4c16.2,0,29.4-13.2,29.4-29.4V806.3h149.9c16.2,0,29.4-13.2,29.4-29.4C988.9,760.6,975.7,747.5,959.5,747.5z">
              </path>
            </svg>
          </ng-container>
        </div>
    <mat-form-field>
      <input matInput required [(ngModel)]="_variant.Label" #Label="ngModel" name="Label" placeholder="Variant" type="text" />
    </mat-form-field>
    <mat-form-field>
      <input matInput required [(ngModel)]="_variant.Value" #Value="ngModel" name="Value" placeholder="Option" type="text" />
    </mat-form-field>
    <div style="display: flex">
      <mat-form-field class="price">
        <input matInput [(ngModel)]="_variant.Price_Diff" #Price_Diff="ngModel" name="Price_Diff" placeholder="Price" type="number" />
      </mat-form-field>
      <mat-form-field class="qte">
        <input matInput [(ngModel)]="_variant.Quantity" #Quantity="ngModel" name="Quantity" placeholder="Quantity" type="number" />
      </mat-form-field>
    </div>

    <div class="formFooter">
      <button matRipple *ngIf="_variant.Id > 0" type="button" (click)="resetForm()" class="reset">Reset</button>
      <button matRipple type="submit" class="">{{ _variant.Id > 0 ? 'Edit' : 'Add'}}</button>
      <button matRipple *ngIf="_variant.Id > 0" type="button" (click)="deleteVariant(_variant.Id)" class="delete">Delete</button>
    </div>
  </div>
  <div class="variantsList">
    <ng-scrollbar *ngIf="_productObject" [shown]="'native'" barClass="scrollbar" thumbClass="scroll-thumb">
      <div class="v-row default">
        <div class="col-img"><img [src]="'/Content/Images/Products/' + _productObject.Id + '/Main/' + _productObject.Image"></div>
        <div class="col-var">COLOR</div>
        <div class="col-val">{{_productObject.Color | uppercase}}</div>
        <div class="col-price">{{_productObject.Price | currency:'USD'}}</div>
        <div class="col-qte">
          {{ (_productObject.Quantity == null) ? 'MAX' : (_productObject.Quantity === 0) ? 'Out' :  _productObject.Quantity+' unit' }}
        </div>
        <div class="col-date">{{ _dateTime.fromISO(_productObject.Last_Update).toRelative() }}</div>
      </div>
      <ng-container *ngIf="_productObject.Variants">
        <div matRipple *ngFor="let row of _productObject.Variants; trackBy: trackById" (click)="fillForm(row)" class="v-row">
          <div class="col-img">
            <img *ngIf="row.Image" [src]="'/Content/Images/Products/' + _productObject.Id + '/Variants/' + row.Id + '/' + row.Image">
            <img *ngIf="!row.Image" [src]="'/Content/Images/Products/' + _productObject.Id + '/Main/' + _productObject.Image">
          </div>
          <div class="col-var text-truncate">{{row.Label | uppercase}}</div>
          <div class="col-val text-truncate">{{row.Value | uppercase}}</div>
          <div class="col-price">{{ (_productObject.Price + row.Price_Diff) | currency:'USD' }}</div>
          <div class="col-qte">
            {{ (row.Quantity == null) ? 'MAX' : (row.Quantity === 0) ? 'Out' :  row.Quantity+' unit' }}
          </div>
          <div class="col-date">{{ _dateTime.fromISO(row.Last_Update).toRelative() }}</div>
        </div>
      </ng-container>
    </ng-scrollbar>
  </div>
</form>

<!-- <data-viewer [data]="_variant"></data-viewer> -->
<!-- <data-viewer [data]="_productObject?.Id"></data-viewer> -->
<!-- <data-viewer [data]="form.value"></data-viewer> -->
